<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.22.0 by Michael Rose
  Copyright 2013-2020 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Code Conventions - AEM.Design</title>
<meta name="description" content="On This Page">


  <meta name="author" content="Max Barrass">
  
  <meta property="article:author" content="Max Barrass">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="en_AU">
<meta property="og:site_name" content="AEM.Design">
<meta property="og:title" content="Code Conventions">
<meta property="og:url" content="https://aem.design/manual/conventions/">


  <meta property="og:description" content="On This Page">



  <meta property="og:image" content="https://aem.design/assets/images/logo/aem-design2.png">





  <meta property="article:published_time" content="2021-04-27T01:46:42+10:00">



  <meta property="article:modified_time" content="2021-03-17T01:07:44+11:00">



  

  


<link rel="canonical" href="https://aem.design/manual/conventions/">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Organization",
      "url": "https://aem.design/",
      "logo": "https://aem.design/assets/images/logo/aem-design2.png"
    
  }
</script>


  <meta name="google-site-verification" content="nf9xOwPPG8xVZpd1iJm4vjRvG64E2SvgcuXbWH5DGTA" />





<!-- end _includes/seo.html -->



  <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="AEM.Design Feed">


<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css">

<!--[if IE]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->


  
    <script src="/assets/scripts/lightbox.js"></script>
  
    <script src="/assets/scripts/code-copy.js"></script>
  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tiny-slider/2.9.2/min/tiny-slider.js"></script>
  

    <!-- start custom head snippets -->

<!-- insert favicons. use http://realfavicongenerator.net/ -->

<link rel="apple-touch-icon" sizes="180x180" href="/assets/icons/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/assets/icons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/assets/icons/favicon-16x16.png">
<link rel="manifest" href="/assets/icons/site.webmanifest">
<link rel="mask-icon" href="/assets/icons/safari-pinned-tab.svg" color="#5bbad5">
<link rel="shortcut icon" href="/assets/icons/favicon.ico">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="msapplication-config" content="/assets/icons/browserconfig.xml">
<meta name="theme-color" content="#ffffff">



<meta property="og:image" content="https://aem.design/assets/images/logo/aem-design2.png">



  
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tiny-slider/2.9.3/tiny-slider.css">
  
    <link rel="stylesheet" href="/assets/styles/head.css">
  
    <link rel="stylesheet" href="/assets/styles/tiny-slider.css">
  
    <link rel="stylesheet" href="/assets/styles/code-copy.css">
  


<!-- end custom head snippets -->

  </head>

  <body class="layout--single">
    <nav class="skip-links">
  <h2 class="screen-reader-text">Skip links</h2>
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
        <a class="site-logo" href="/"><img src="/assets/images/logo/aem-design2.png" alt="site logo"></a>
        
        <a class="site-title" href="/"><span class="title">AEM.Design</span>
          
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a target="" href="https://github.com/aem-design">GitHub</a>
            </li><li class="masthead__menu-item">
              <a target="_blank" href="https://gitter.im/aem-design/Lobby">Chat</a>
            </li><li class="masthead__menu-item">
              <a target="" href="/blog/">Blog</a>
            </li><li class="masthead__menu-item">
              <a target="" href="/quick-start-guide/">Quick-Start Guide</a>
            </li><li class="masthead__menu-item">
              <a target="" href="/manifesto/">Manifesto</a>
            </li><li class="masthead__menu-item">
              <a target="" href="/manual/">Manual</a>
            </li><li class="masthead__menu-item">
              <a target="" href="/archives/">Archives</a>
            </li><li class="masthead__menu-item">
              <a target="" href="/about/">About</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <svg class="icon" width="16" height="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.99 16">
            <path d="M15.5,13.12L13.19,10.8a1.69,1.69,0,0,0-1.28-.55l-0.06-.06A6.5,6.5,0,0,0,5.77,0,6.5,6.5,0,0,0,2.46,11.59a6.47,6.47,0,0,0,7.74.26l0.05,0.05a1.65,1.65,0,0,0,.5,1.24l2.38,2.38A1.68,1.68,0,0,0,15.5,13.12ZM6.4,2A4.41,4.41,0,1,1,2,6.4,4.43,4.43,0,0,1,6.4,2Z" transform="translate(-.01)"></path>
          </svg>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle Menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>

<style>
#site-nav .site-title {
  width: 150px;
  line-height: 1em;
  border-left: 4px rgba(255,179,107) solid;
  padding-left: .5em;
  font-style: italic;
  font-weight: lighter;
  text-transform: uppercase;
}
#site-nav .site-title .site-subtitle {
  display: none;
}
</style>



    <div class="initial-content">
      



<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="https://schema.org/Person">

  
    <div class="author__avatar">
      
        <img src="/assets/images/profile/maxbarrass4.jpg" alt="Max Barrass" itemprop="image">
      
    </div>
  

  <div class="author__content">
    
      <h3 class="author__name" itemprop="name">Max Barrass</h3>
    
    
      <div class="author__bio" itemprop="description">
        <p>Founder</p>

      </div>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      

      

      
        <li>
          <a href="http://maxbarrass.com" itemprop="url">
            <i class="fas fa-fw fa-link" aria-hidden="true"></i><span class="label">Website</span>
          </a>
        </li>
      

      
        <li>
          <a href="mailto:max@aem.design">
            <meta itemprop="email" content="max@aem.design" />
            <i class="fas fa-fw fa-envelope-square" aria-hidden="true"></i><span class="label">Email</span>
          </a>
        </li>
      

      

      
        <li>
          <a href="https://twitter.com/maxbarrass" itemprop="sameAs" rel="nofollow noopener noreferrer">
            <i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i><span class="label">Twitter</span>
          </a>
        </li>
      

      

      
        <li>
          <a href="https://www.linkedin.com/in/maxbarrass" itemprop="sameAs" rel="nofollow noopener noreferrer">
            <i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span class="label">LinkedIn</span>
          </a>
        </li>
      

      

      

      

      

      
        <li>
          <a href="https://github.com/wildone" itemprop="sameAs" rel="nofollow noopener noreferrer">
            <i class="fab fa-fw fa-github" aria-hidden="true"></i><span class="label">GitHub</span>
          </a>
        </li>
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

<li>
  Sponsor
</li>


<li>
  <a href="https://github.com/sponsors/wildone" itemprop="sameAs">
    <i class="fa fa-heart" aria-hidden="true"></i> Github
  </a>
</li>







    </ul>
  </div>
</div>

  
  
    
      
      
      
      
    
    
      

<nav class="nav__list">
  
  <input id="ac-toc" name="accordion-toc" type="checkbox" />
  <label for="ac-toc">Toggle Menu</label>
  <ul class="nav__items">
    
      <li>
        
          <a href="/manual/"><span class="nav__sub-title">Manual</span></a>
        

        
        <ul>
          
            <li><a href="/manual/projects/">Projects</a></li>
          
            <li><a href="/manual/devtools/">Development Tools</a></li>
          
            <li><a href="/manual/management/">Management</a></li>
          
            <li><a href="/manual/osenv/">Operating Environment</a></li>
          
            <li><a href="/manual/process/">Process</a></li>
          
            <li><a href="/manual/conventions/" class="active">Conventions</a></li>
          
            <li><a href="/manual/image-conventions/">Image Conventions</a></li>
          
            <li><a href="/manual/dls/">Design Language System</a></li>
          
        </ul>
        
      </li>
    
  </ul>
</nav>

    
  
  </div>



  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Code Conventions">
    <meta itemprop="description" content="           On This Page    ">
    <meta itemprop="datePublished" content="2021-04-27T01:46:42+10:00">
    <meta itemprop="dateModified" content="2021-03-17T01:07:44+11:00">

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">Code Conventions
</h1>
          

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          13 minute read
        
      </span>
    
  </p>


        </header>
      

      <section class="page__content" itemprop="text">
        
        <div class="sticky">
    <aside class="sidebar__right">
<nav class="toc">
      <header><h4 class="nav__title"><i class="fas fa-file-alt"></i> On This Page</h4></header>
<ul class="toc__menu" id="markdown-toc">
  <li><a href="#philosophy-for-conventions" id="markdown-toc-philosophy-for-conventions">Philosophy for Conventions</a></li>
  <li><a href="#component-grouping-and-naming" id="markdown-toc-component-grouping-and-naming">Component Grouping and Naming</a></li>
  <li><a href="#component-variants-and-badges" id="markdown-toc-component-variants-and-badges">Component Variants and Badges</a></li>
  <li><a href="#component-structure" id="markdown-toc-component-structure">Component Structure</a></li>
  <li><a href="#component-client-libs-namespace-convention" id="markdown-toc-component-client-libs-namespace-convention">Component Client Libs Namespace Convention</a></li>
  <li><a href="#component-versioning" id="markdown-toc-component-versioning">Component Versioning</a></li>
  <li><a href="#component-client-libs-modules" id="markdown-toc-component-client-libs-modules">Component Client Libs Modules</a></li>
  <li><a href="#jsp-component-template" id="markdown-toc-jsp-component-template">JSP Component Template</a></li>
  <li><a href="#htl-component-template" id="markdown-toc-htl-component-template">HTL Component Template</a></li>
  <li><a href="#htl-component-wcmusepojo-class" id="markdown-toc-htl-component-wcmusepojo-class">HTL Component WCMUsePojo Class</a></li>
  <li><a href="#clientlibs-convention---javascript" id="markdown-toc-clientlibs-convention---javascript">ClientLibs Convention - JavaScript</a></li>
  <li><a href="#clientlibs-convention---css" id="markdown-toc-clientlibs-convention---css">ClientLibs Convention - CSS</a></li>
  <li><a href="#dialog-conventions" id="markdown-toc-dialog-conventions">Dialog Conventions</a>    <ul>
      <li><a href="#dialog-layout" id="markdown-toc-dialog-layout">Dialog Layout</a></li>
      <li><a href="#component-artifacts-alignment" id="markdown-toc-component-artifacts-alignment">Component Artifacts Alignment</a></li>
    </ul>
  </li>
  <li><a href="#using-tags-for-styles" id="markdown-toc-using-tags-for-styles">Using Tags for Styles</a>    <ul>
      <li><a href="#style-tags-content-generator" id="markdown-toc-style-tags-content-generator">Style Tags Content Generator</a></li>
    </ul>
  </li>
</ul>

    </nav>
</aside>
</div>

<h2 id="philosophy-for-conventions">Philosophy for Conventions</h2>

<p>Philosophy of AEM.Design is to empower all developers (FED/BED) to be able to achieve more without having to learn a lot more initially. This means that focus changes to providing a simplified and specific experience that allows continuous learning of AEM and framework features. As more knowledge is gained and existing structures are understood, developers can start update structures as needed.</p>

<p>Major principles that should be considered as you start learning</p>

<ul>
  <li>Emphases on Content - ensure that as much structure that required is converted into the content so that its changeable post-deployment, this is following <a href="/archives/davids-model#rule-1-data-first-structure-later-maybe">Davids #1 Rule</a>.</li>
  <li>Abstract AEM Knowledge - generalise and abstract AEM specific knowledge into patterns that other developers can use without immediately needing to understand underlying principles.</li>
  <li>Component Grouping and Naming - components should be named concerning their content and AEM purpose, and not about their end-use, see more details in <a href="/manual/conventions/#component-grouping-and-naming">Component Grouping and Naming</a>.</li>
  <li>Component Variants and Badges - ability to represent different structures of component content without having to resort to using CSS to hide available content; see more details in <a href="/manual/conventions/#component-variants-and-badges">Component Variants and Badges</a>.</li>
  <li>Tags Usage - tags in AEM are specifically made to provide a mechanism to create a taxonomy of keywords that allow linking of content together. This capability is beneficial to represent Design Language keywords that contain styling nomenclature.</li>
</ul>

<h2 id="component-grouping-and-naming">Component Grouping and Naming</h2>

<p>All components used by authors without exception must be located in their designated component group folders.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>components
    layout (component group)
        article
</code></pre></div></div>

<p>This structure will ensure that their components are organised and quickly found, additionally grouping provides a segmentation structure that will allow component numbers scale without creating a mess in one folder.</p>

<p>Following is the list of name that should be used for making component groups</p>

<table>
  <thead>
    <tr>
      <th>Group</th>
      <th>Name</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Analytics</td>
      <td>analytics</td>
      <td>components for analytics use</td>
    </tr>
    <tr>
      <td>Media</td>
      <td>media</td>
      <td>assets related components, galleries, asset lists, videos etc</td>
    </tr>
    <tr>
      <td>Content</td>
      <td>content</td>
      <td>primary components used to store authored content, content from these components is used by other components for display</td>
    </tr>
    <tr>
      <td>Cloud Services</td>
      <td>cloudservices</td>
      <td>components for cloud services</td>
    </tr>
    <tr>
      <td>Layout</td>
      <td>layout</td>
      <td>provide layout ability, grouping and structuring of content, contains layout related components</td>
    </tr>
    <tr>
      <td>List</td>
      <td>list</td>
      <td>find pages and show their data in lists</td>
    </tr>
    <tr>
      <td>Details</td>
      <td>details</td>
      <td>used to create and display custom metadata for different page types</td>
    </tr>
    <tr>
      <td>Widgets</td>
      <td>widgets</td>
      <td>used to provide client-side functionality, integrating 3rd party services</td>
    </tr>
    <tr>
      <td>Commerce</td>
      <td>commerce</td>
      <td>used for Commerce, shopping carts, checkouts, product listing etc.</td>
    </tr>
    <tr>
      <td>Common</td>
      <td>common</td>
      <td>used for shared components that are available to authors</td>
    </tr>
    <tr>
      <td>Forms</td>
      <td>forms</td>
      <td>used to contain all the components that are used in forms</td>
    </tr>
    <tr>
      <td>Template</td>
      <td>template</td>
      <td>used to store all the available Template components that include HTML page structures that are used as a base for authorable templates</td>
    </tr>
    <tr>
      <td>Workflow</td>
      <td>workflow</td>
      <td>steps that appear in workflow editor</td>
    </tr>
  </tbody>
</table>

<p>Groups are targeted to be meaningful to Authors when creating new groups consider how to explain component groups to authors.</p>

<h2 id="component-variants-and-badges">Component Variants and Badges</h2>

<p>Component Variants are used as a pattern to output different HTML templates for the same component content.</p>

<p><img src="/assets/images/diagrams/component-variant-example.png" alt="Component Variants" /></p>

<p>Every component will have unique fields that are used by authors for content input. Usually, these fields will be tied to a specific visual representation of that content. There are scenarios where you need to be able to output different HTML structure of a component data, to achieve Component Variant pattern is used.</p>

<p><img src="/assets/images/diagrams/component-variant-entity-diagram.png" alt="Component Variants Entity Diagram" /></p>

<p>Each component should have at least one default Variant, and component template should provide a content-driven approach to loading new Variants see <a href="/manual/conventions/#htl-component-template">HTL Component Template</a> for example. This allows authors to choose from a dropdown list which variant they require.</p>

<p>Additionally Component Variants concepts are applied as a convention to allow a component to control the display of its content in related components. This Variants concept provides a method of describing target output structures that are structured from component fields. This pattern offers a way to remove dependencies of one component on the structure of another component.</p>

<p><img src="/assets/images/diagrams/component-badge-usage.png" alt="Component Badges" /></p>

<p>If a component needs to leverage the content of another component it used Sling selectors to call component with a specific badge name. This also allows abstracting all of the structure into content and create an Author controlled presentation pattern.</p>

<h2 id="component-structure">Component Structure</h2>

<p>All component must follow consistent patterns that help everyone to understand consistency across components. Following are the conventions that are used for components.</p>

<table>
  <thead>
    <tr>
      <th>Node</th>
      <th>Purpouse</th>
      <th>Usercase</th>
      <th>Extension</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>_cq_design_dalog</td>
      <td>Authoring dialog that will be used to configure component</td>
      <td>mandatory</td>
      <td>xml</td>
    </tr>
    <tr>
      <td>_cq_design</td>
      <td>Primary Authoring fo interacting with component properties</td>
      <td>mandatory</td>
      <td>xml</td>
    </tr>
    <tr>
      <td>.content.xml</td>
      <td>component authoring metadata</td>
      <td>mandatory</td>
      <td>xml</td>
    </tr>
    <tr>
      <td>_cq_editConfig.xml</td>
      <td>component authoring configuration for Editor UI</td>
      <td>mandatory</td>
      <td>xml</td>
    </tr>
    <tr>
      <td>README.md</td>
      <td>readme describing the component which is viewed in the Components Experience in AEM</td>
      <td>mandatory</td>
      <td>md</td>
    </tr>
    <tr>
      <td>variant.default.<EXT></EXT></td>
      <td>default template for display</td>
      <td>mandatory</td>
      <td>jsp,html</td>
    </tr>
    <tr>
      <td>component.<EXT></EXT></td>
      <td>default boostrap of component</td>
      <td>mandatory</td>
      <td>jsp,html</td>
    </tr>
    <tr>
      <td>badge.default.<EXT></EXT></td>
      <td>default badge to be used by other components for representing current component content</td>
      <td>optional</td>
      <td>jsp,html</td>
    </tr>
  </tbody>
</table>

<h2 id="component-client-libs-namespace-convention">Component Client Libs Namespace Convention</h2>

<p>Components that have specific clientlibs should have following client libs assigned if they will be loaded by clientlibs in template footer and headers.</p>

<p>Paths of component namespace should be following the location of the component path eg <tenant>.components.<group>.<subfolder>.<component name=""> with <subfolder> repeating for each subfolder leading up to component folder.</subfolder></component></subfolder></group></tenant></p>

<table>
  <thead>
    <tr>
      <th>Namespace</th>
      <th>Purpose</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><tenant>.components.author</tenant></td>
      <td>specifies that this component library should be loaded into global authoring clientlibs</td>
    </tr>
    <tr>
      <td><tenant>.components.publish</tenant></td>
      <td>specifies that this component library should be loaded into global publish clientlibs</td>
    </tr>
    <tr>
      <td><tenant>.components.<component name=""></component></tenant></td>
      <td>specific group for the component to be used for specific usage such as component loading its own client libs</td>
    </tr>
  </tbody>
</table>

<h2 id="component-versioning">Component Versioning</h2>
<p>Initially, when a component is created, it’s acceptable to have the component code to be located under its folder path.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>components
    layout
        article
            &lt;component structure&gt;
</code></pre></div></div>

<p>Where possible initial component structure should be located in the v1 subfolder, this will also ensure that the evolution of component will require marginally less effort.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>components
    layout
        article ( sling:resourceSuperType -&gt; v1/article )
            v1
                &lt;component structure&gt;
</code></pre></div></div>

<p>As component version grow, root component should be pointed to the specific version all existing references of component should be using. Not doing this will mean that your content pages will have hard references to component version without any Authoring way of changing that apart from reauthoring the content.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>components
    layout
        article ( sling:resourceSuperType -&gt; v2/article )
            v1
                article
            v2
                article
</code></pre></div></div>

<p>This will ensure that all existing pages will continue working as expected and will provide a natural upgrade for all component locations. This pattern will also minimise presenting component versions to Authors as there is no simple way to describe difference to authors when they are editing.</p>

<h2 id="component-client-libs-modules">Component Client Libs Modules</h2>
<p>Component generic client libs should be located in the component folder.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>components
    layout
        article
            clientlibs (version agnostic client libs)
                css/
                js/
                css.txt
                js.txt
            v1
                article 
                clientlibs (version specific client libs) 
                &lt;component structure&gt;
            v2
                article
                clientlibs (version specific client libs) 
                &lt;component structure&gt;
</code></pre></div></div>

<h2 id="jsp-component-template">JSP Component Template</h2>

<p>For ease of understanding component code following sections should be used as reference.</p>

<table>
  <thead>
    <tr>
      <th>LABEL</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><em>** COMPONENT DEPENDECIES **</em></td>
      <td>used for describing dependecies</td>
    </tr>
    <tr>
      <td><em>** COMPONENT DECLARATIONS **</em></td>
      <td> </td>
    </tr>
    <tr>
      <td><em>** COMPONENT LOGIC **</em></td>
      <td> </td>
    </tr>
    <tr>
      <td><em>** COMPONENT TEMPLATING **</em></td>
      <td> </td>
    </tr>
  </tbody>
</table>

<p>Following is a sample for component bootrstap, please remove annotations when using as a template.</p>

<div class="language-jsp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>*** COMPONENT DEPENDECIES ***
<span class="nt">&lt;%@ page </span><span class="na">import=</span><span class="s">"com.google.common.base.Throwables"</span> <span class="nt">%&gt;</span>
<span class="nt">&lt;%@ include </span><span class="na">file=</span><span class="s">"/apps/aemdesign/global/global.jsp"</span> <span class="nt">%&gt;</span>
<span class="nt">&lt;%@ include </span><span class="na">file=</span><span class="s">"/apps/aemdesign/global/images.jsp"</span> <span class="nt">%&gt;</span>
<span class="nt">&lt;%@ include </span><span class="na">file=</span><span class="s">"/apps/aemdesign/global/components.jsp"</span> <span class="nt">%&gt;</span>
<span class="nt">&lt;%</span>
<span class="o">***</span> <span class="no">COMPONENT</span> <span class="no">DECLARATIONS</span> <span class="o">***</span>
 
    <span class="kd">final</span> <span class="nc">String</span> <span class="no">DEFAULT_ARIA_ROLE</span> <span class="o">=</span> <span class="s">"article"</span><span class="o">;</span>
 
    <span class="c1">// {</span>
    <span class="c1">//   1 required - property name,</span>
    <span class="c1">//   2 required - default value,</span>
    <span class="c1">//   3 optional - name of component attribute to add value into</span>
    <span class="c1">//   4 optional - canonical name of class for handling multivalues, String or Tag</span>
    <span class="c1">// }</span>
    <span class="nc">Object</span><span class="o">[][]</span> <span class="n">componentFields</span> <span class="o">=</span> <span class="o">{</span>
        <span class="o">{</span><span class="no">FIELD_ARIA_ROLE</span><span class="o">,</span><span class="no">DEFAULT_ARIA_ROLE</span><span class="o">,</span> <span class="no">DEFAULT_ARIA_ROLE_ATTRIBUTE</span><span class="o">},</span>
        <span class="o">{</span><span class="no">FIELD_VARIANT</span><span class="o">,</span> <span class="no">DEFAULT_VARIANT</span><span class="o">},</span>
    <span class="o">};</span>
 
    <span class="nc">ComponentProperties</span> <span class="n">componentProperties</span> <span class="o">=</span> <span class="n">getComponentProperties</span><span class="o">(</span>
            <span class="n">pageContext</span><span class="o">,</span>
            <span class="n">componentFields</span><span class="o">,</span>
            <span class="no">DEFAULT_FIELDS_STYLE</span><span class="o">,</span>
            <span class="no">DEFAULT_FIELDS_ACCESSIBILITY</span><span class="o">);</span>
 
<span class="o">***</span> <span class="no">COMPONENT</span> <span class="no">LOGIC</span> <span class="o">***</span>
    <span class="n">componentProperties</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="no">DEFAULT_BACKGROUND_IMAGE_NODE_NAME</span><span class="o">,</span><span class="n">getBackgroundImageRenditions</span><span class="o">(</span><span class="n">pageContext</span><span class="o">));</span>
 
<span class="nt">%&gt;</span>
*** COMPONENT TEMPLATING ***
<span class="nt">&lt;c:set </span><span class="na">var=</span><span class="s">"componentProperties"</span><span class="na"> value=</span><span class="s">"&lt;%= componentProperties %&gt;"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;%@ include </span><span class="na">file=</span><span class="s">"/apps/aemdesign/global/component-background.jsp"</span> <span class="nt">%&gt;</span>
<span class="nt">&lt;c:choose&gt;</span>
    <span class="nt">&lt;c:when </span><span class="na">test=</span><span class="s">"</span><span class="si">${</span><span class="n">componentProperties</span><span class="o">.</span><span class="na">variant</span> <span class="n">eq</span> <span class="no">DEFAULT_VARIANT</span><span class="si">}</span><span class="s">"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;%@ include </span><span class="na">file=</span><span class="s">"variant.default.jsp"</span> <span class="nt">%&gt;</span>
    <span class="nt">&lt;/c:when&gt;</span>
    <span class="nt">&lt;c:otherwise&gt;</span>
        <span class="nt">&lt;%@ include </span><span class="na">file=</span><span class="s">"variant.default.jsp"</span> <span class="nt">%&gt;</span>
    <span class="nt">&lt;/c:otherwise&gt;</span>
<span class="nt">&lt;/c:choose&gt;</span>
<span class="nt">&lt;%@include </span><span class="na">file=</span><span class="s">"/apps/aemdesign/global/component-badge.jsp"</span> <span class="nt">%&gt;</span>

</code></pre></div></div>

<h2 id="htl-component-template">HTL Component Template</h2>

<p>Following is a sample for component bootrstap</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;sly</span> <span class="na">data-sly-use.component=</span><span class="s">"design.aem.models.v2.layout.Article"</span>
     <span class="na">data-sly-use.variant=</span><span class="s">"${component.componentProperties.variantTemplate}"</span>
     <span class="na">data-sly-use.background=</span><span class="s">"aemdesign/global/templates/component-background.html"</span>
     <span class="na">data-sly-use.info=</span><span class="s">"aemdesign/global/templates/component-info.html"</span><span class="nt">&gt;</span>
 
    <span class="c">&lt;!--/* print component background */--&gt;</span>
    <span class="nt">&lt;sly</span> <span class="na">data-sly-call=</span><span class="s">"${background.variant @ componentId=component.componentProperties.componentId, assets=component.componentProperties.bgimage.componentBackgroundAssets}"</span><span class="nt">&gt;&lt;/sly&gt;</span>
 
    <span class="c">&lt;!--/* print component variant */--&gt;</span>
    <span class="nt">&lt;sly</span> <span class="na">data-sly-call=</span><span class="s">"${variant.variant @ componentProperties=component.componentProperties}"</span><span class="nt">&gt;&lt;/sly&gt;</span>
 
    <span class="c">&lt;!--/* print component info in edit mode */--&gt;</span>
    <span class="nt">&lt;sly</span> <span class="na">data-sly-call=</span><span class="s">"${info.variant @ componentProperties=component.componentProperties, component=component}"</span><span class="nt">&gt;&lt;/sly&gt;</span>
 
<span class="nt">&lt;/sly&gt;</span>
</code></pre></div></div>

<h2 id="htl-component-wcmusepojo-class">HTL Component WCMUsePojo Class</h2>

<p>Following is a reference for component Class that will be backing each HTL component.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">design.aem.models.v2.details</span><span class="o">;</span>
 
<span class="kn">import</span> <span class="nn">com.adobe.cq.sightly.WCMUsePojo</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">design.aem.components.ComponentProperties</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">design.aem.utils.components.TagUtil</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.day.cq.i18n.I18n</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.slf4j.Logger</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.slf4j.LoggerFactory</span><span class="o">;</span>
 
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">PageDetails</span> <span class="kd">extends</span> <span class="nc">WCMUsePojo</span> <span class="o">{</span>
 
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">Logger</span> <span class="no">LOGGER</span> <span class="o">=</span> <span class="nc">LoggerFactory</span><span class="o">.</span><span class="na">getLogger</span><span class="o">(</span><span class="nc">PageDetails</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
 
    <span class="kd">private</span> <span class="nc">ComponentProperties</span> <span class="n">componentProperties</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
    <span class="kd">public</span> <span class="nc">ComponentProperties</span> <span class="nf">getComponentProperties</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">componentProperties</span><span class="o">;</span>
    <span class="o">}</span>
     
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">activate</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
         
        <span class="n">com</span><span class="o">.</span><span class="na">day</span><span class="o">.</span><span class="na">cq</span><span class="o">.</span><span class="na">i18n</span><span class="o">.</span><span class="na">I18n</span> <span class="n">_i18n</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">I18n</span><span class="o">(</span><span class="n">getRequest</span><span class="o">());</span>
 
        <span class="c1">//COMPONENT STYLES</span>
        <span class="c1">// {</span>
        <span class="c1">//   1 required - property name,</span>
        <span class="c1">//   2 required - default value,</span>
        <span class="c1">//   3 optional - name of component attribute to add value into</span>
        <span class="c1">//   4 optional - canonical name of class for handling multivalues, String or Tag</span>
        <span class="c1">// }</span>
        <span class="nc">Object</span><span class="o">[][]</span> <span class="n">componentFields</span> <span class="o">=</span> <span class="o">{</span>
            <span class="o">{</span><span class="no">FIELD_VARIANT</span><span class="o">,</span> <span class="no">DEFAULT_VARIANT</span><span class="o">},</span>
        <span class="o">};</span>
        <span class="n">componentProperties</span> <span class="o">=</span> <span class="nc">ComponentsUtil</span><span class="o">.</span><span class="na">getComponentProperties</span><span class="o">(</span>
            <span class="k">this</span><span class="o">,</span>
            <span class="n">componentFields</span><span class="o">,</span>
            <span class="no">DEFAULT_FIELDS_STYLE</span><span class="o">,</span>
            <span class="no">DEFAULT_FIELDS_ACCESSIBILITY</span><span class="o">,</span>
            <span class="no">DEFAULT_FIELDS_ANALYTICS</span>
        <span class="o">);</span>
         
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div></div>

<h2 id="clientlibs-convention---javascript">ClientLibs Convention - JavaScript</h2>

<p>When writing component-specific API code in Javascript please ensure you encapsulating namespacing, that does not directly depend on external dependencies.</p>

<p>JavaScript for all Component JavaScript code must be divided into:</p>

<ol>
  <li><strong>functions.js</strong> - component functions API, has all of the required static utility functions that will be used by component behaviours. These should only be functions and should not be binding to elements of the page on load events.</li>
  <li><strong>behaviour.js</strong> - component binding API, has all of the load events and binding to HTML, uses functions to help with structure and reusable config as required. This is the file that demonstrates how the component is attached to HTML markup.</li>
</ol>

<p>JS modules should be located as following.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>components
    layout
        article
            clientlibs (version agnostic client libs)
                css/
                js/
                    functions.js
                    behaviour.js
                css.txt
                js.txt
</code></pre></div></div>

<p>Following is an example of a function used for component.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//search - functions</span>
<span class="nb">window</span><span class="p">.</span><span class="nx">AEMDESIGN</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">AEMDESIGN</span> <span class="o">||</span> <span class="p">{</span><span class="dl">"</span><span class="s2">jQuery</span><span class="dl">"</span><span class="p">:{}};</span>
<span class="nb">window</span><span class="p">.</span><span class="nx">AEMDESIGN</span><span class="p">.</span><span class="nx">components</span> <span class="o">=</span> <span class="nx">AEMDESIGN</span><span class="p">.</span><span class="nx">components</span> <span class="o">||</span> <span class="p">{};</span>
<span class="nb">window</span><span class="p">.</span><span class="nx">AEMDESIGN</span><span class="p">.</span><span class="nx">components</span><span class="p">.</span><span class="nx">search</span> <span class="o">=</span> <span class="nx">AEMDESIGN</span><span class="p">.</span><span class="nx">components</span><span class="p">.</span><span class="nx">search</span> <span class="o">||</span> <span class="p">{};</span>
 
<span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">$</span><span class="p">,</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">ko</span><span class="p">,</span> <span class="nx">log</span><span class="p">,</span> <span class="nx">utils</span><span class="p">,</span> <span class="nx">ns</span><span class="p">,</span> <span class="nb">window</span><span class="p">,</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span> <span class="c1">//NOSONAR convention for wrapping all modules</span>
 
    <span class="dl">"</span><span class="s2">use strict</span><span class="dl">"</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">_version</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">0.1</span><span class="dl">"</span><span class="p">;</span>
 
    <span class="nx">ns</span><span class="p">.</span><span class="nx">version</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">_version</span><span class="p">;</span>
    <span class="p">};</span>
 
    <span class="nx">ns</span><span class="p">.</span><span class="nx">init</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$el</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">//INIT CODE</span>
    <span class="p">};</span>
 
<span class="p">})(</span><span class="nx">AEMDESIGN</span><span class="p">.</span><span class="nx">jQuery</span><span class="p">,</span><span class="nx">_</span><span class="p">,</span><span class="nx">ko</span><span class="p">,</span> <span class="nx">AEMDESIGN</span><span class="p">.</span><span class="nx">log</span><span class="p">,</span> <span class="nx">AEMDESIGN</span><span class="p">.</span><span class="nx">utils</span><span class="p">,</span> <span class="nx">AEMDESIGN</span><span class="p">.</span><span class="nx">components</span><span class="p">.</span><span class="nx">search</span><span class="p">,</span> <span class="k">this</span><span class="p">);</span>
</code></pre></div></div>

<p>Following is an example of behaviours used for component.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//search - behaviour</span>
<span class="nb">window</span><span class="p">.</span><span class="nx">AEMDESIGN</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">AEMDESIGN</span> <span class="o">||</span> <span class="p">{</span><span class="dl">"</span><span class="s2">jQuery</span><span class="dl">"</span><span class="p">:{}};</span>
<span class="nb">window</span><span class="p">.</span><span class="nx">AEMDESIGN</span><span class="p">.</span><span class="nx">components</span> <span class="o">=</span> <span class="nx">AEMDESIGN</span><span class="p">.</span><span class="nx">components</span> <span class="o">||</span> <span class="p">{};</span>
<span class="nb">window</span><span class="p">.</span><span class="nx">AEMDESIGN</span><span class="p">.</span><span class="nx">components</span><span class="p">.</span><span class="nx">search</span> <span class="o">=</span> <span class="nx">AEMDESIGN</span><span class="p">.</span><span class="nx">components</span><span class="p">.</span><span class="nx">search</span> <span class="o">||</span> <span class="p">{};</span>
 
<span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">$</span><span class="p">,</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">ko</span><span class="p">,</span> <span class="nx">utils</span><span class="p">,</span> <span class="nx">log</span><span class="p">,</span> <span class="nx">search</span><span class="p">,</span> <span class="nb">window</span><span class="p">,</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span> <span class="c1">//NOSONAR convention for wrapping all modules</span>
 
    <span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
 
        <span class="nx">$</span><span class="p">(</span><span class="dl">"</span><span class="s2">[data-modules*='search']</span><span class="dl">"</span><span class="p">).</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
 
            <span class="kd">var</span> <span class="nx">base</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
 
            <span class="nx">search</span><span class="p">.</span><span class="nx">init</span><span class="p">(</span><span class="nx">base</span><span class="p">);</span>
 
 
        <span class="p">});</span>
 
 
    <span class="p">});</span>
 
<span class="p">})(</span><span class="nx">AEMDESIGN</span><span class="p">.</span><span class="nx">jQuery</span><span class="p">,</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">ko</span><span class="p">,</span> <span class="nx">AEMDESIGN</span><span class="p">.</span><span class="nx">utils</span><span class="p">,</span> <span class="nx">AEMDESIGN</span><span class="p">.</span><span class="nx">log</span><span class="p">,</span> <span class="nx">AEMDESIGN</span><span class="p">.</span><span class="nx">components</span><span class="p">.</span><span class="nx">search</span><span class="p">,</span> <span class="k">this</span><span class="p">);</span> <span class="c1">//pass in additional dependencies</span>
</code></pre></div></div>

<h2 id="clientlibs-convention---css">ClientLibs Convention - CSS</h2>

<p>When writing CSS ensure that component Styles are added under a component namespace. Here is an example</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="nx">component</span><span class="p">]</span> <span class="p">.</span><span class="o">&lt;</span><span class="nx">component</span> <span class="nx">name</span><span class="o">&gt;</span> <span class="p">{</span>
<span class="p">}</span>
</code></pre></div></div>

<h1 id="dialog-conventions">Dialog Conventions</h1>

<p>Common Tabs for all component - use shared dialogs.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;style</span><span class="na">Tab</span>
    <span class="na">jcr:primaryType=</span><span class="s">"nt:unstructured"</span>
    <span class="na">jcr:title=</span><span class="s">"Style"</span>
    <span class="na">path=</span><span class="s">"/apps/aemdesign/global/dialog/touch/style/content/items/styleTab"</span>
    <span class="na">resourceType=</span><span class="s">"granite/ui/components/foundation/section"</span>
    <span class="na">sling:resourceType=</span><span class="s">"granite/ui/components/coral/foundation/include"</span><span class="nt">/&gt;</span>
</code></pre></div></div>

<p>Use Tags as a source for your Dropdowns - will ensure that content can be updated later.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;cancelinheritparent</span>
    <span class="na">jcr:primaryType=</span><span class="s">"nt:unstructured"</span>
    <span class="na">sling:resourceType=</span><span class="s">"granite/ui/components/coral/foundation/form/select"</span>
    <span class="na">fieldLabel=</span><span class="s">"Cancel Inherit Parent"</span>
    <span class="na">name=</span><span class="s">"./cancelInheritParent"</span>
    <span class="na">emptyOption=</span><span class="s">"{Boolean}true"</span>
    <span class="na">value=</span><span class="s">""</span><span class="nt">&gt;</span>
    <span class="nt">&lt;datasource</span>
        <span class="na">jcr:primaryType=</span><span class="s">"nt:unstructured"</span>
        <span class="na">sling:resourceType=</span><span class="s">"aemdesign/components/coral/datasources/tags"</span>
        <span class="na">variant=</span><span class="s">"valuelist"</span>
        <span class="na">path=</span><span class="s">"/content/cq:tags/${(empty tenant.id and empty tenantId) ? 'aemdesign' : (empty tenant.id ? tenantId : tenant.id )}/component-dialog/common/true-false"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/cancelinheritparent&gt;</span>
</code></pre></div></div>

<p>Don’t use Checkbox fields in dialogs - use Dropdowns so that it’s clear what if the user has made a selection and what defaults are</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;cancelinheritparent</span>
    <span class="na">jcr:primaryType=</span><span class="s">"nt:unstructured"</span>
    <span class="na">sling:resourceType=</span><span class="s">"granite/ui/components/coral/foundation/form/select"</span>
    <span class="na">fieldLabel=</span><span class="s">"Cancel Inherit Parent"</span>
    <span class="na">name=</span><span class="s">"./cancelInheritParent"</span>
    <span class="na">emptyOption=</span><span class="s">"{Boolean}true"</span>
    <span class="na">value=</span><span class="s">""</span><span class="nt">&gt;</span>
...
<span class="nt">&lt;/cancelinheritparent&gt;</span>
</code></pre></div></div>

<p>Common Component Field Spec - define component fields in an array to use with component helper function ComponentsUtil.getComponentProperties</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Object</span><span class="o">[][]</span> <span class="n">componentFields</span> <span class="o">=</span> <span class="o">{</span>
    <span class="o">{</span><span class="s">"author"</span><span class="o">,</span> <span class="n">pageAuthorFullName</span><span class="o">},</span>
    <span class="o">{</span><span class="s">"authorUrl"</span><span class="o">,</span> <span class="n">pageAuthorEmail</span><span class="o">},</span>
    <span class="o">{</span><span class="no">FIELD_VARIANT</span><span class="o">,</span> <span class="no">DEFAULT_VARIANT</span><span class="o">}</span>
<span class="o">};</span>
</code></pre></div></div>

<p>Common Component Field Load - this will collect and construct all fields with defaults and select Design/Policy config as defaults.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">componentProperties</span> <span class="o">=</span> <span class="nc">ComponentsUtil</span><span class="o">.</span><span class="na">getComponentProperties</span><span class="o">(</span>
    <span class="k">this</span><span class="o">,</span>
    <span class="n">componentFields</span><span class="o">,</span>
    <span class="no">DEFAULT_FIELDS_STYLE</span><span class="o">,</span>
    <span class="no">DEFAULT_FIELDS_ACCESSIBILITY</span><span class="o">);</span>
</code></pre></div></div>

<p>Common Component Field Presets - use globally defined fields spect to collect content from shared tabs in dialog</p>
<blockquote>
  <p>For Styles Tabs and Common Fields</p>
</blockquote>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//COMPONENT STYLES</span>
<span class="c1">// {</span>
<span class="c1">//   1 required - property name,</span>
<span class="c1">//   2 required - default value,</span>
<span class="c1">//   3 optional - name of component attribute to add value into</span>
<span class="c1">//   4 optional - canonical name of class for handling multivalues, String or Tag</span>
<span class="c1">// }</span>
<span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">Object</span><span class="o">[][]</span> <span class="no">DEFAULT_FIELDS_STYLE</span> <span class="o">=</span> <span class="o">{</span>
    <span class="o">{</span><span class="no">FIELD_STYLE_COMPONENT_ID</span><span class="o">,</span> <span class="s">""</span><span class="o">,</span> <span class="s">"id"</span><span class="o">},</span>
    <span class="o">{</span><span class="no">FIELD_STYLE_COMPONENT_THEME</span><span class="o">,</span> <span class="k">new</span> <span class="nc">String</span><span class="o">[]{},</span> <span class="s">"class"</span><span class="o">,</span> <span class="nc">Tag</span><span class="o">.</span><span class="na">class</span><span class="o">.</span><span class="na">getCanonicalName</span><span class="o">()},</span>
    <span class="o">{</span><span class="no">FIELD_STYLE_COMPONENT_MODIFIERS</span><span class="o">,</span> <span class="k">new</span> <span class="nc">String</span><span class="o">[]{},</span> <span class="s">"class"</span><span class="o">,</span> <span class="nc">Tag</span><span class="o">.</span><span class="na">class</span><span class="o">.</span><span class="na">getCanonicalName</span><span class="o">()},</span>
    <span class="o">{</span><span class="no">FIELD_STYLE_COMPONENT_MODULES</span><span class="o">,</span> <span class="k">new</span> <span class="nc">String</span><span class="o">[]{},</span> <span class="s">"data-modules"</span><span class="o">,</span> <span class="nc">Tag</span><span class="o">.</span><span class="na">class</span><span class="o">.</span><span class="na">getCanonicalName</span><span class="o">()},</span>
    <span class="o">{</span><span class="no">FIELD_STYLE_COMPONENT_CHEVRON</span><span class="o">,</span> <span class="k">new</span> <span class="nc">String</span><span class="o">[]{},</span> <span class="s">"class"</span><span class="o">,</span> <span class="nc">Tag</span><span class="o">.</span><span class="na">class</span><span class="o">.</span><span class="na">getCanonicalName</span><span class="o">()},</span>
    <span class="o">{</span><span class="no">FIELD_STYLE_COMPONENT_ICON</span><span class="o">,</span> <span class="k">new</span> <span class="nc">String</span><span class="o">[]{},</span> <span class="s">"class"</span><span class="o">,</span> <span class="nc">Tag</span><span class="o">.</span><span class="na">class</span><span class="o">.</span><span class="na">getCanonicalName</span><span class="o">()},</span>
    <span class="o">{</span><span class="no">FIELD_STYLE_COMPONENT_POSITIONX</span><span class="o">,</span> <span class="s">""</span><span class="o">,</span> <span class="s">"x"</span><span class="o">},</span>
    <span class="o">{</span><span class="no">FIELD_STYLE_COMPONENT_POSITIONY</span><span class="o">,</span> <span class="s">""</span><span class="o">,</span> <span class="s">"y"</span><span class="o">},</span>
    <span class="o">{</span><span class="no">FIELD_STYLE_COMPONENT_WIDTH</span><span class="o">,</span> <span class="s">""</span><span class="o">,</span> <span class="s">"width"</span><span class="o">},</span>
    <span class="o">{</span><span class="no">FIELD_STYLE_COMPONENT_HEIGHT</span><span class="o">,</span> <span class="s">""</span><span class="o">,</span> <span class="s">"height"</span><span class="o">},</span>
    <span class="o">{</span><span class="no">FIELD_STYLE_COMPONENT_SITETHEMECATEGORY</span><span class="o">,</span> <span class="s">""</span><span class="o">},</span>
    <span class="o">{</span><span class="no">FIELD_STYLE_COMPONENT_SITETHEMECOLOR</span><span class="o">,</span> <span class="s">""</span><span class="o">},</span>
    <span class="o">{</span><span class="no">FIELD_STYLE_COMPONENT_SITETITLECOLOR</span><span class="o">,</span> <span class="s">""</span><span class="o">},</span>
    <span class="o">{</span><span class="no">FIELD_STYLE_COMPONENT_BOOLEANATTR</span><span class="o">,</span> <span class="k">new</span> <span class="nc">String</span><span class="o">[]{},</span> <span class="s">" "</span><span class="o">,</span> <span class="nc">Tag</span><span class="o">.</span><span class="na">class</span><span class="o">.</span><span class="na">getCanonicalName</span><span class="o">()},</span> <span class="c1">//#3" " =do not store content in data attributes</span>
    <span class="o">{</span><span class="no">FIELD_STYLE_COMPONENT_ANIMATION_ENABLED</span><span class="o">,</span> <span class="kc">false</span><span class="o">},</span>
    <span class="o">{</span><span class="no">FIELD_STYLE_COMPONENT_ANIMATION_NAME</span><span class="o">,</span> <span class="nc">StringUtils</span><span class="o">.</span><span class="na">EMPTY</span><span class="o">,</span> <span class="s">"data-aos"</span><span class="o">},</span>
    <span class="o">{</span><span class="no">FIELD_STYLE_COMPONENT_ANIMATION_ONCE</span><span class="o">,</span> <span class="nc">StringUtils</span><span class="o">.</span><span class="na">EMPTY</span><span class="o">,</span> <span class="s">"data-aos-once"</span><span class="o">},</span>
    <span class="o">{</span><span class="no">FIELD_STYLE_COMPONENT_ANIMATION_EASING</span><span class="o">,</span> <span class="nc">StringUtils</span><span class="o">.</span><span class="na">EMPTY</span><span class="o">,</span> <span class="s">"data-aos-easing"</span><span class="o">},</span>
    <span class="o">{</span><span class="no">FIELD_STYLE_COMPONENT_ANIMATION_DELAY</span><span class="o">,</span> <span class="nc">StringUtils</span><span class="o">.</span><span class="na">EMPTY</span><span class="o">,</span> <span class="s">"data-aos-delay"</span><span class="o">},</span>
    <span class="o">{</span><span class="no">FIELD_STYLE_COMPONENT_ANIMATION_DURATION</span><span class="o">,</span> <span class="nc">StringUtils</span><span class="o">.</span><span class="na">EMPTY</span><span class="o">,</span> <span class="s">"data-aos-duration"</span><span class="o">},</span>
<span class="o">};</span>
</code></pre></div></div>

<h2 id="dialog-layout">Dialog Layout</h2>

<p>Consistent dialog pattern allow ease of understanding and experience of developing, using and training components to Authors.</p>

<p><img src="/assets/images/diagrams/dialog-convention.png" alt="Dialog Layout" /></p>

<h2 id="component-artifacts-alignment">Component Artifacts Alignment</h2>

<p>All components must have a matching artifact in related artifacts. This is to ensure consistency and completeness of component delivery.</p>

<p><img src="/assets/images/diagrams/folder-naming.png" alt="Component Artifacts Alignment" /></p>

<h1 id="using-tags-for-styles">Using Tags for Styles</h1>

<p>One of the main objectives of AEM.Design is to provide a consistent way of representing Design Languages as a taxonomy of Tags. This provides a mechanism to create Tags taxonomy by designers and then applied to components by authors.</p>

<p>The following image demonstrates the shared Style dialog that is applied to all components.</p>

<p><img src="/assets/images/dialogs/shared-dialog-styles.png" alt="Shared Dialog - Styles" /></p>

<p>Following table describes each available option. Each of the options is defined in a way to be able to easily apply to Design Systems and so that it can be easily understood by Authors.</p>

<table>
  <thead>
    <tr>
      <th>Field</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>ID</td>
      <td>text</td>
      <td>generates an Id attribute for a component</td>
    </tr>
    <tr>
      <td>Theme</td>
      <td>tags</td>
      <td>used to apply style one or a combination of nested components</td>
    </tr>
    <tr>
      <td>Modifiers</td>
      <td>tags</td>
      <td>used to apply design system tweaks to components</td>
    </tr>
    <tr>
      <td>Module</td>
      <td>tags</td>
      <td>used to apply behaviour to component</td>
    </tr>
    <tr>
      <td>Chevron</td>
      <td>tags</td>
      <td>used to apply Chevron to a component</td>
    </tr>
    <tr>
      <td>Icon</td>
      <td>tags</td>
      <td>used to apply Icon to the component</td>
    </tr>
    <tr>
      <td>Boolean Attributes</td>
      <td>tags</td>
      <td>used to apply metadata attributes</td>
    </tr>
    <tr>
      <td>Positions</td>
      <td>text</td>
      <td>used by Modules for placement of component in parent e.g. Tooltips</td>
    </tr>
    <tr>
      <td>Size</td>
      <td>text</td>
      <td>used to add width and height attributes to component</td>
    </tr>
  </tbody>
</table>

<p>All text fields provide direct input that is added to the component wrapper. All Tag fields allow selecting multiple tags for each filed, which enables flexibility when applying styles.</p>

<p>Technically a component wrapper tag is trying to create the following footprint and it automated by using shared dialogs. This is reference output of share libraries to provide a consistent wrapper for all components.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;div</span> <span class="na">component</span> <span class="na">id=</span><span class="s">"${componentProperties.id}"</span> 
    <span class="na">class=</span><span class="s">"${componentProperties.name} ${componentProperties.theme} ${componentProperties.modifier} ${componentProperties.chevron} ${componentProperties.icon}"</span>
    <span class="na">style=</span><span class="s">"width:${componentProperties.width};height:${componentProperties.height};"</span> 
    <span class="na">x=</span><span class="s">"${componentProperties.x}"</span> <span class="na">y=</span><span class="s">"${componentProperties.y}"</span>
    <span class="na">data-modules=</span><span class="s">"${componentProperties.modules}"</span>
    <span class="err">${</span><span class="na">componentProperties.booleanAttributes</span><span class="err">}</span><span class="nt">&gt;&lt;/div&gt;</span>
</code></pre></div></div>

<p>Furthermore using Tags allows storing style related content in a central place which can be updated by authors, using tags also has a benefit of translations and ability to change the actual value of tag class by updating tag entry.</p>

<p><img src="/assets/images/dialogs/tag-authoring-update.png" alt="Tags Authoring" /></p>

<p>These updates to tag authoring UI enable updating and adding values that correspond to CSS names in authoring UI.</p>

<h2 id="style-tags-content-generator">Style Tags Content Generator</h2>

<p>Compose project contains all of the CSS, JS and Tag YAML files that describe design being developed. This subproject is compiled and installed into AEM as a standalone package. Tag YAML files is used to specify design language mapping to CSS classes, and during compiling Tags content is generated.</p>

<p>A custom Content Generator is used to generate Tags from YAML file similar to flowing.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="s">content/_cq_tags/aemdesign/component-style-icon</span><span class="pi">:</span> <span class="nl">&amp;component-style-icon</span>
  <span class="s">feed/atom</span><span class="pi">:</span>
    <span class="na">flat</span><span class="pi">:</span> <span class="no">true</span>
    <span class="na">prefix</span><span class="pi">:</span> <span class="s1">'</span><span class="s">fa</span><span class="nv"> </span><span class="s">fa-rss'</span>
    <span class="na">title</span><span class="pi">:</span> <span class="s1">'</span><span class="s">Atom'</span>

  <span class="s">feed/rss</span><span class="pi">:</span>
    <span class="na">flat</span><span class="pi">:</span> <span class="no">true</span>
    <span class="na">prefix</span><span class="pi">:</span> <span class="s1">'</span><span class="s">fa</span><span class="nv"> </span><span class="s">fa-rss'</span>
    <span class="na">title</span><span class="pi">:</span> <span class="s1">'</span><span class="s">RSS'</span>

  <span class="na">social</span><span class="pi">:</span>
    <span class="na">prefixes</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">facebook</span>
      <span class="pi">-</span> <span class="s">facebook-f</span>
      <span class="pi">-</span> <span class="s">instagram</span>
      <span class="pi">-</span> <span class="s">linkedin</span>
      <span class="pi">-</span> <span class="s">linkedin-in</span>
      <span class="pi">-</span> <span class="s">pinterest-p</span>
      <span class="pi">-</span> <span class="s">tumblr</span>
      <span class="pi">-</span> <span class="s">tumblr-square</span>
      <span class="pi">-</span> <span class="s">twitter</span>
      <span class="pi">-</span> <span class="s">youtube</span>
    <span class="na">valueFormat</span><span class="pi">:</span> <span class="s">fab fa-%%prefix%%</span>
    <span class="na">title</span><span class="pi">:</span> <span class="s1">'</span><span class="s">%%prefix_normalised%%'</span>
</code></pre></div></div>

<p><a href="https://github.com/aem-design/aemdesign-aem-support/blob/master/aemdesign-aem-compose/content-generator/config/core/">Reference Tag YAML files</a> can be found in your Componse project and will be located in the Compose <code class="language-plaintext highlighter-rouge">content-generator/config/core</code> folder if you have generated using the <a href="https://github.com/aem-design/aemdesign-archetype">AEM.Design Archetype</a>.</p>

        
      </section>

      <footer class="page__meta">
        
        


        
  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time datetime="2021-03-17">March 17, 2021</time></p>


      </footer>

      <section class="page__share">
  
    <h4 class="page__share-title">Share on</h4>
  

  <a href="https://twitter.com/intent/tweet?text=Code+Conventions%20https%3A%2F%2Faem.design%2Fmanual%2Fconventions%2F" class="btn btn--twitter" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Twitter"><i class="fab fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Faem.design%2Fmanual%2Fconventions%2F" class="btn btn--facebook" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Facebook"><i class="fab fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=https%3A%2F%2Faem.design%2Fmanual%2Fconventions%2F" class="btn btn--linkedin" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on LinkedIn"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>


      
  <nav class="pagination">
    
      <a href="/manual/process/" class="pagination--pager" title="Process
">Previous</a>
    
    
      <a href="/manual/image-conventions/" class="pagination--pager" title="Image Conventions
">Next</a>
    
  </nav>

    </div>

    
      <div class="page__comments">
  
  
      <h4 class="page__comments-title">Leave a Comment</h4>
      <section id="disqus_thread"></section>
    
</div>

    
  </article>

  
  
    <div class="page__related">
      <h4 class="page__related-title">You May Also Enjoy</h4>
      <div class="grid__wrapper">
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/blog/2021/04/25/creating-akamai-flush-agent" rel="permalink">AEM Akamai Cache flush Agent 😍
</a>
      
    </h2>
    

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          2 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">Why should we bother DevOps to clear Akamai Cache when you can do it yourself using flush agent
</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/blog/2021/03/16/aem-sdk-jdk11" rel="permalink">AEM SDK and JDK11
</a>
      
    </h2>
    

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          1 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">Building on the previous work Docker Containers Everywhere, AEM and Docker 😍😘 and Docker AEM Bundle its time to bring AEM SDK and JDK11 into life!
</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/blog/2021/01/21/automation-testing-for-aem-dialogs" rel="permalink">Automation Testing For AEM Dialogs
</a>
      
    </h2>
    

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          2 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">Automation testing is an absolute mandatory and covered in Automation Testing and Human Reporting and demonstrates a viable, usable AEM Automated Testing app...</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/blog/2021/01/18/creating-custom-workflow-step" rel="permalink">Creating Custom Workflow Step
</a>
      
    </h2>
    

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          1 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">When writing custom workflow services, you may find yourself not seeing your service being recognised by the Process Step.
You will first encounter this when...</p>
  </article>
</div>

        
      </div>
    </div>
  
  
</div>

    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><form onsubmit="return googleCustomSearchExecute();" id="cse-search-box-form-id">
    <label class="sr-only" for="cse-search-input-box-id">
      Enter your search term...
    </label>
    <input type="search" id="cse-search-input-box-id" class="search-input" tabindex="-1" placeholder="Enter your search term..." />
  </form>
  <div id="results" class="results">
    <gcse:searchresults-only></gcse:searchresults-only>
  </div></div>

      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    

    
      
        
      
        
      
        
      
        
      
        
      
        
      
    

    
      <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
    
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2021 AEM.Design. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>


<script>
  (function () {
    var cx = '004447691990096211192:ourol5vhlpw';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();

  function googleCustomSearchExecute() {
    var input = document.getElementById('cse-search-input-box-id');
    var element = google.search.cse.element.getElement('searchresults-only0');
    if (input.value == '') {
      element.clearAllResults();
    } else {
      element.execute(input.value);
    }
    return false;
  }

  
    $(document).ready(function () {
      $('input#cse-search-input-box-id').on('keyup', function () {
        googleCustomSearchExecute();
      });
    });
  
</script>




  <script>
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-90746663-1']);
  
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>






    
  <script>
    var disqus_config = function () {
      this.page.url = "https://aem.design/manual/conventions/";  /* Replace PAGE_URL with your page's canonical URL variable */
      this.page.identifier = "/manual/060-conventions"; /* Replace PAGE_IDENTIFIER with your page's unique identifier variable */
    };
    (function() { /* DON'T EDIT BELOW THIS LINE */
      var d = document, s = d.createElement('script');
      s.src = 'https://aem-design.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  </script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>


  





  </body>
</html>
