<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.24.0 by Michael Rose
  Copyright 2013-2020 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Projects - AEM.Design</title>
<meta name="description" content="On This Page">


  <meta name="author" content="Yaw Ly">
  
  <meta property="article:author" content="Yaw Ly">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="en_AU">
<meta property="og:site_name" content="AEM.Design">
<meta property="og:title" content="Projects">
<meta property="og:url" content="https://aem.design/manual/projects/">


  <meta property="og:description" content="On This Page">



  <meta property="og:image" content="https://aem.design/assets/images/screenshots/homepage-small.png">





  <meta property="article:published_time" content="2022-02-01T14:14:18+11:00">



  <meta property="article:modified_time" content="2021-03-14T13:49:18+11:00">



  

  


<link rel="canonical" href="https://aem.design/manual/projects/">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Organization",
      "url": "https://aem.design/",
      "logo": "https://aem.design/assets/images/screenshots/homepage-small.png"
    
  }
</script>


  <meta name="google-site-verification" content="nf9xOwPPG8xVZpd1iJm4vjRvG64E2SvgcuXbWH5DGTA" />






<!-- end _includes/seo.html -->



  <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="AEM.Design Feed">


<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css"></noscript>


  
    <script src="/assets/scripts/lightbox.js"></script>
  
    <script src="/assets/scripts/code-copy.js"></script>
  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tiny-slider/2.9.2/min/tiny-slider.js"></script>
  


    <!-- start custom head snippets -->

<!-- insert favicons. use http://realfavicongenerator.net/ -->

<link rel="apple-touch-icon" sizes="180x180" href="/assets/icons/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/assets/icons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/assets/icons/favicon-16x16.png">
<link rel="manifest" href="/assets/icons/site.webmanifest">
<link rel="mask-icon" href="/assets/icons/safari-pinned-tab.svg" color="#5bbad5">
<link rel="shortcut icon" href="/assets/icons/favicon.ico">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="msapplication-config" content="/assets/icons/browserconfig.xml">
<meta name="theme-color" content="#ffffff">



<meta property="og:image" content="https://aem.design/assets/images/screenshots/homepage-small.png">



  
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tiny-slider/2.9.3/tiny-slider.css">
  
    <link rel="stylesheet" href="/assets/styles/head.css">
  
    <link rel="stylesheet" href="/assets/styles/tiny-slider.css">
  
    <link rel="stylesheet" href="/assets/styles/code-copy.css">
  


<!-- adsense -->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6707033742178132"
     crossorigin="anonymous"></script>


<!-- end custom head snippets -->

  </head>

  <body class="layout--single">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
        <a class="site-logo" href="/"><img src="/assets/images/logo/aem-design2.png" alt="site logo"></a>
        
        <a class="site-title" href="/"><span class="title">AEM.Design</span>
          
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a target="" href="https://github.com/aem-design">GitHub</a>
            </li><li class="masthead__menu-item">
              <a target="_blank" href="https://gitter.im/aem-design/Lobby">Chat</a>
            </li><li class="masthead__menu-item">
              <a target="" href="/blog/">Blog</a>
            </li><li class="masthead__menu-item">
              <a target="" href="/quick-start-guide/">Quick-Start Guide</a>
            </li><li class="masthead__menu-item">
              <a target="" href="/manifesto/">Manifesto</a>
            </li><li class="masthead__menu-item">
              <a target="" href="/manual/">Manual</a>
            </li><li class="masthead__menu-item">
              <a target="" href="/archives/">Archives</a>
            </li><li class="masthead__menu-item">
              <a target="" href="/about/">About</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <svg class="icon" width="16" height="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.99 16">
            <path d="M15.5,13.12L13.19,10.8a1.69,1.69,0,0,0-1.28-.55l-0.06-.06A6.5,6.5,0,0,0,5.77,0,6.5,6.5,0,0,0,2.46,11.59a6.47,6.47,0,0,0,7.74.26l0.05,0.05a1.65,1.65,0,0,0,.5,1.24l2.38,2.38A1.68,1.68,0,0,0,15.5,13.12ZM6.4,2A4.41,4.41,0,1,1,2,6.4,4.43,4.43,0,0,1,6.4,2Z" transform="translate(-.01)"></path>
          </svg>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle Menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>

<style>
#site-nav .site-title {
  width: 150px;
  line-height: 1em;
  border-left: 4px rgba(255,179,107) solid;
  padding-left: .5em;
  font-style: italic;
  font-weight: lighter;
  text-transform: uppercase;
}
#site-nav .site-title .site-subtitle {
  display: none;
}
</style>



    <div class="initial-content">
      



<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="https://schema.org/Person">

  
    <div class="author__avatar">
      
        <img src="/assets/images/profile/yawly.jpg" alt="Yaw Ly" itemprop="image">
      
    </div>
  

  <div class="author__content">
    
      <h3 class="author__name" itemprop="name">Yaw Ly</h3>
    
    
      <div class="author__bio" itemprop="description">
        <p>Founder</p>

      </div>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      

      

      

      
        <li>
          <a href="mailto:yaw@aem.design">
            <meta itemprop="email" content="yaw@aem.design" />
            <i class="fas fa-fw fa-envelope-square" aria-hidden="true"></i><span class="label">Email</span>
          </a>
        </li>
      

      

      

      

      
        <li>
          <a href="https://www.linkedin.com/in/yaw-ly-16805514" itemprop="sameAs" rel="nofollow noopener noreferrer">
            <i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span class="label">LinkedIn</span>
          </a>
        </li>
      

      

      

      

      

      
        <li>
          <a href="https://github.com/yawly" itemprop="sameAs" rel="nofollow noopener noreferrer">
            <i class="fab fa-fw fa-github" aria-hidden="true"></i><span class="label">GitHub</span>
          </a>
        </li>
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      








    </ul>
  </div>
</div>

  

<div itemscope itemtype="http://schema.org/Person">

  
    <div class="author__avatar">
      
        <img src="/assets/images/profile/maxbarrass4.jpg" class="author__avatar" alt="Max Barrass" itemprop="image">
      
    </div>
  

  <div class="author__content">
    <h3 class="author__name" itemprop="name">Max Barrass</h3>
    
      <p class="author__bio" itemprop="description">
        Founder
      </p>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      

      
      <li>
        <a href="mailto:max@aem.design">
          <meta itemprop="email" content="max@aem.design" />
          <i class="fas fa-envelope-square" aria-hidden="true"></i> Email
        </a>
      </li>
      

      

      
      <li>
        <a href="https://www.linkedin.com/in/maxbarrass" itemprop="sameAs">
          <i class="fab fa-linkedin" aria-hidden="true"></i> LinkedIn
        </a>
      </li>
      

        
        <li>
            <a href="https://github.com/wildone" itemprop="sameAs">
                <i class="fab fa-github" aria-hidden="true"></i> GitHub
            </a>
        </li>
        


    </ul>
  </div>

</div>



  
    
      
      
      
      
    
    
      

<nav class="nav__list">
  
  <input id="ac-toc" name="accordion-toc" type="checkbox" />
  <label for="ac-toc">Toggle Menu</label>
  <ul class="nav__items">
    
      <li>
        
          <a href="/manual/"><span class="nav__sub-title">Manual</span></a>
        

        
        <ul>
          
            <li><a href="/manual/projects/" class="active">Projects</a></li>
          
            <li><a href="/manual/devtools/">Development Tools</a></li>
          
            <li><a href="/manual/management/">Management</a></li>
          
            <li><a href="/manual/osenv/">Operating Environment</a></li>
          
            <li><a href="/manual/process/">Process</a></li>
          
            <li><a href="/manual/conventions/">Conventions</a></li>
          
            <li><a href="/manual/image-conventions/">Image Conventions</a></li>
          
            <li><a href="/manual/dls/">Design Language System</a></li>
          
        </ul>
        
      </li>
    
  </ul>
</nav>

    
  
  </div>



  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Projects">
    <meta itemprop="description" content="           On This Page    ">
    <meta itemprop="datePublished" content="2022-02-01T14:14:18+11:00">
    <meta itemprop="dateModified" content="2021-03-14T13:49:18+11:00">

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">Projects
</h1>
          

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          7 minute read
        
      </span>
    
  </p>


        </header>
      

      <section class="page__content" itemprop="text">
        
        <div class="sticky">
    <aside class="sidebar__right">
<nav class="toc">
      <header><h4 class="nav__title"><i class="fas fa-file-alt"></i> On This Page</h4></header>
<ul class="toc__menu" id="markdown-toc">
  <li><a href="#projects" id="markdown-toc-projects">Projects</a>    <ul>
      <li><a href="#overview" id="markdown-toc-overview">Overview</a></li>
      <li><a href="#ansible-deploy-project" id="markdown-toc-ansible-deploy-project">Ansible Deploy Project</a>        <ul>
          <li><a href="#ansible-project-overview" id="markdown-toc-ansible-project-overview">Ansible Project Overview</a></li>
          <li><a href="#ansible-variables" id="markdown-toc-ansible-variables">Ansible Variables</a></li>
          <li><a href="#group-variables" id="markdown-toc-group-variables">Group Variables</a></li>
          <li><a href="#source-code-repositories" id="markdown-toc-source-code-repositories">Source Code Repositories</a></li>
        </ul>
      </li>
      <li><a href="#adobe-experience-manager-project" id="markdown-toc-adobe-experience-manager-project">Adobe Experience Manager Project</a>        <ul>
          <li><a href="#aem-project-sources" id="markdown-toc-aem-project-sources">AEM Project Sources</a></li>
          <li><a href="#aem-service-bundle" id="markdown-toc-aem-service-bundle">AEM Service Bundle</a></li>
          <li><a href="#aem-configuration" id="markdown-toc-aem-configuration">AEM Configuration</a>            <ul>
              <li><a href="#osgi-run-modes" id="markdown-toc-osgi-run-modes">OSGi Run modes</a></li>
              <li><a href="#environment-config-content" id="markdown-toc-environment-config-content">Environment Config Content</a></li>
            </ul>
          </li>
          <li><a href="#aem-initial-content" id="markdown-toc-aem-initial-content">AEM Initial Content</a></li>
        </ul>
      </li>
      <li><a href="#virtual-machine-project" id="markdown-toc-virtual-machine-project">Virtual Machine Project</a>        <ul>
          <li><a href="#packer-project-overview" id="markdown-toc-packer-project-overview">Packer Project Overview</a>            <ul>
              <li><a href="#packer-project-structure" id="markdown-toc-packer-project-structure">Packer Project Structure</a></li>
            </ul>
          </li>
          <li><a href="#using-packer" id="markdown-toc-using-packer">Using Packer</a>            <ul>
              <li><a href="#packer-installation" id="markdown-toc-packer-installation">Packer Installation</a></li>
              <li><a href="#packer-command" id="markdown-toc-packer-command">Packer Command</a></li>
            </ul>
          </li>
          <li><a href="#machine-image-builds" id="markdown-toc-machine-image-builds">Machine Image Builds</a>            <ul>
              <li><a href="#local-image-build" id="markdown-toc-local-image-build">Local Image Build</a></li>
              <li><a href="#sit-image-build" id="markdown-toc-sit-image-build">SIT Image Build</a></li>
              <li><a href="#staging-image-build" id="markdown-toc-staging-image-build">Staging Image Build</a></li>
              <li><a href="#production-image-build" id="markdown-toc-production-image-build">Production Image Build</a></li>
            </ul>
          </li>
          <li><a href="#updating-a-machine-image" id="markdown-toc-updating-a-machine-image">Updating a Machine Image</a></li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

    </nav>
</aside>
</div>

<h1 id="projects">Projects</h1>

<h2 id="overview">Overview</h2>

<p>There are three primary project sources in the AEM implementation:</p>

<ol>
  <li>
    <p><a href="#ansible-deploy-project">Ansible Deploy Project</a> - used to contain all of the ansible playbooks for managing AEM docker services</p>
  </li>
  <li>
    <p><a href="#virtual-machine-project">Virtual Machine Project</a> - used to create VM hosts using packer.io.</p>
  </li>
  <li>
    <p><a href="https://github.com/aem-design/docker-aem">docker-aem</a> - docker container used to run local AEM instances.</p>
  </li>
</ol>

<p>The following sections will highlight their key design decisions and their implementation details.</p>

<h2 id="ansible-deploy-project">Ansible Deploy Project</h2>

<p>The aemdesign-deploy project is a <strong>server automation</strong> project using Ansible to deploy and configure services. The project also contains scripted operational tasks for maintaining the operating system and services..</p>

<p>Before proceeding, this section contains content with assumed Ansible knowledge. Recommended starting points are ‘<em><a href="http://docs.ansible.com/ansible/latest/playbooks_intro.html">Intro to Playbook*s</a>’ (NOTE:  http://docs.ansible.com/ansible/latest/playbooks_intro.html) and *‘**<a href="http://docs.ansible.com/ansible/latest/intro_inventory.html">Intro to Inventorie*s</a></em>’* (NOTE:  http://docs.ansible.com/ansible/latest/intro_inventory.html) in the Ansible online documentation.</p>

<p>This project is implemented with the following features and their concepts are required to maintain the project:</p>

<ol>
  <li>
    <p>Roles (<a href="http://docs.ansible.com/ansible/latest/playbooks_roles.html">http://docs.ansible.com/ansible/latest/playbooks_roles.html</a>)</p>
  </li>
  <li>
    <p>Tags (<a href="http://docs.ansible.com/ansible/latest/playbooks_tags.html">http://docs.ansible.com/ansible/latest/playbooks_tags.html</a>)</p>
  </li>
  <li>
    <p>Variables (<a href="http://docs.ansible.com/ansible/latest/playbooks_variables.html">http://docs.ansible.com/ansible/latest/playbooks_variables.html</a>)</p>
  </li>
</ol>

<p>Additional topics on Ansible, can be found in the <a href="http://docs.ansible.com/ansible/latest/index.html">online documentation</a>.</p>

<p>The aemdesign-deploy project is implemented using the standard Ansible layout. Anyone familiar with Ansible should also be familiar with this implementation layout.</p>

<p>An implementation specific overview is provided in the following section.</p>

<h3 id="ansible-project-overview">Ansible Project Overview</h3>

<p>The recommended operating system for the aemdesign-deploy project is either MacOS or a distribution of Linux such as Red Hat and Ubuntu.</p>

<table>
  <thead>
    <tr>
      <th>Path</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>/</td>
      <td>Playbooks for site, group and operations are located at the root of the project. This is discussed in detail in the Playbooks section.</td>
    </tr>
    <tr>
      <td>/inventory</td>
      <td>The inventory defines servers (defined as a SSH host). The servers provide the automation scripts with machine targets to deploy and configure services. In the aemdesign-deploy project, servers are typically Red Hat Enterprise Linux servers with a Docker service and Docker containers are specified in a group using an alias for the target machine. The inventories are organised into environments in a group var (group_vars/[environment_name]/vars.yml) which specifies environment specific configurations. See for Testing Environments for inventory details.</td>
    </tr>
    <tr>
      <td>/roles</td>
      <td>A role is a reusable unit of work that is composed of serial tasks. For example, a role can create a logical volume or start a web server in a Docker host.</td>
    </tr>
    <tr>
      <td>/group_vars</td>
      <td>There are two categories of group vars; application and environment. Typically, application group vars are used to override the default variables defined within roles. The environment group vars are used to define environment specific variables by overriding the group variables. This is represented as a hierarchy within the inventories as groups with the ‘:children’ suffix.</td>
    </tr>
    <tr>
      <td>/host_vars</td>
      <td>These are variables for servers that form the site and they are shared across all environments. This means that automation scripts apply the same host vars in each environment which ensures all environments are similar to each other.</td>
    </tr>
    <tr>
      <td>/library</td>
      <td>Custom modules developed for the project. Modules have been developed to orchestrate AEM and Docker.</td>
    </tr>
  </tbody>
</table>

<h3 id="ansible-variables">Ansible Variables</h3>

<p>Table of variable descriptions.</p>

<table>
  <thead>
    <tr>
      <th>Variable</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>docker_image_tag</td>
      <td>Common variable name used  in roles for specifying which Docker image version to run.</td>
    </tr>
  </tbody>
</table>

<h3 id="group-variables">Group Variables</h3>

<p>For each role,  there is  group variable that overrides the default variable defined in the role. Within each file, there is the variable *docker_image_tag *that can be updated to change the version of the Docker image to run.</p>

<table>
  <thead>
    <tr>
      <th>Role</th>
      <th>Group Variable</th>
      <th>Role / Files / Dockerfile</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>publisher</td>
      <td>/aemdesign-deploy/group_vars/publisher/vars.yml</td>
      <td>/aemdesign-deploy/roles/aem/files/docker/aem</td>
    </tr>
    <tr>
      <td>author</td>
      <td>/aemdesign-deploy/group_vars/author/vars.yml</td>
      <td>/aemdesign-deploy/roles/aem/files/docker/aem</td>
    </tr>
    <tr>
      <td>consul-client</td>
      <td>/aemdesign-deploy/group_vars/consul-client/vars.yml</td>
      <td>consul:latest</td>
    </tr>
    <tr>
      <td>dispatcher</td>
      <td>/aemdesign-deploy/group_vars/dispatcher/vars.yml</td>
      <td>/aemdesign-deploy/roles/dispatcher/files/docker/dispatcher</td>
    </tr>
    <tr>
      <td>esb</td>
      <td>/aemdesign-deploy/group_vars/esb/vars.yml</td>
      <td>/aemdesign-deploy/roles/mule-esb/files/docker/muleesb</td>
    </tr>
    <tr>
      <td>solr</td>
      <td>/aemdesign-deploy/group_vars/solr/vars.yml</td>
      <td>/aemdesign-deploy/roles/solr-cloud/files/docker/aem-solr</td>
    </tr>
    <tr>
      <td>processing</td>
      <td>/aemdesign-deploy/group_vars/processing/vars.yml</td>
      <td>/aemdesign-deploy/roles/aem/files/docker/aem</td>
    </tr>
    <tr>
      <td>consul-server</td>
      <td>/aemdesign-deploy/group_vars/consul-server/vars.yml</td>
      <td>consul:latest</td>
    </tr>
    <tr>
      <td>nexus</td>
      <td>/aemdesign-deploy/group_vars/nexus/vars.yml</td>
      <td>/aemdesign-deploy/roles/nexus/files/docker/nexus</td>
    </tr>
  </tbody>
</table>

<h3 id="source-code-repositories">Source Code Repositories</h3>

<table>
  <thead>
    <tr>
      <th>Repo</th>
      <th>Notes</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>aemdesign-parent/</td>
      <td>root repo for devops script and automation</td>
    </tr>
    <tr>
      <td>aemdesign-aem-author/</td>
      <td>changes to authoring experience</td>
    </tr>
    <tr>
      <td>aemdesign-aem-common/</td>
      <td>common components</td>
    </tr>
    <tr>
      <td>aemdesign-aem-config/</td>
      <td>configuration for author and publishers</td>
    </tr>
    <tr>
      <td>aemdesign-aem-content/</td>
      <td>initial content</td>
    </tr>
    <tr>
      <td>aemdesign-aem-services/</td>
      <td>services for author and publisher</td>
    </tr>
    <tr>
      <td>aemdesign-aem-showcase/</td>
      <td>showcase content</td>
    </tr>
    <tr>
      <td>aemdesign-aem-training/</td>
      <td>training site content</td>
    </tr>
    <tr>
      <td>aemdesign-deploy/</td>
      <td>deploy project, contains all docker files</td>
    </tr>
    <tr>
      <td>aemdesign-devbot/</td>
      <td>used to control devops script remotely</td>
    </tr>
    <tr>
      <td>aemdesign-docker/</td>
      <td>parent docker project, outdated</td>
    </tr>
    <tr>
      <td>aemdesign-esb-mule/</td>
      <td>esb implementation</td>
    </tr>
    <tr>
      <td>aemdesign-jenkins/</td>
      <td>jenkins backup</td>
    </tr>
    <tr>
      <td>aemdesign-prototype/</td>
      <td>font-end prototype project</td>
    </tr>
    <tr>
      <td>aemdesign-security/</td>
      <td>security for hardening not Atomic hosts</td>
    </tr>
    <tr>
      <td>aemdesign-testing/</td>
      <td>testing suite</td>
    </tr>
    <tr>
      <td>aemdesign-vm/</td>
      <td>vm templating</td>
    </tr>
  </tbody>
</table>

<h2 id="adobe-experience-manager-project">Adobe Experience Manager Project</h2>

<p>Adobe Experience Manager (AEM) Project Source Code and Content Packages</p>

<ul>
  <li>
    <p>AEM Project Sources</p>
  </li>
  <li>
    <p>AEM Service Bundle</p>
  </li>
  <li>
    <p>AEM Configuration</p>
  </li>
  <li>
    <p>AEM Initial Content</p>
  </li>
</ul>

<h3 id="aem-project-sources">AEM Project Sources</h3>

<p>The AEM Project Sources contain AEM 6.1 components, client libraries (HTML, CSS and JavaScript) and AEM lib overlays (NOTE:  AEM overlays https://docs.adobe.com/docs/en/aem/6-3/develop/platform/overlays.html).</p>

<h3 id="aem-service-bundle">AEM Service Bundle</h3>

<p>The AEM Service Bundle contains Java sources for OSGi services and components that extend or add functionality to AEM.</p>

<h3 id="aem-configuration">AEM Configuration</h3>

<p>The AEM Configuration project contains <a href="https://docs.adobe.com/docs/en/aem/6-3/deploy/configuring/configuring-osgi.html">configurations</a> (NOTE:  OSGi configuration https://docs.adobe.com/docs/en/aem/6-3/deploy/configuring/configuring-osgi.html) for AEM OSGi services as well as the OSGi services developed in the <code class="language-plaintext highlighter-rouge">aemdesign-aem-services</code> module.</p>

<p>For environment specific configurations, apply them with run modes to activate configurations. These environment run modes are configured:</p>

<ol>
  <li>
    <p>localdev</p>
  </li>
  <li>
    <p>develop</p>
  </li>
  <li>
    <p>sit</p>
  </li>
  <li>
    <p>uat</p>
  </li>
  <li>
    <p>training</p>
  </li>
  <li>
    <p>staging</p>
  </li>
  <li>
    <p>Production</p>
  </li>
</ol>

<p>These server run modes are configured:</p>

<ol>
  <li>
    <p>author</p>
  </li>
  <li>
    <p>publisher</p>
  </li>
  <li>
    <p>processing</p>
  </li>
</ol>

<h4 id="osgi-run-modes">OSGi Run modes</h4>

<p>The path to the run mode configurations is located at:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>config/src/main/content/jcr_root/apps/aemdesign
</code></pre></div></div>

<p>These run modes are configured for the AEM servers and environments:</p>

<ul>
  <li>
    <p>config.author</p>
  </li>
  <li>
    <p>config.author.develop</p>
  </li>
  <li>
    <p>config.author.localdev</p>
  </li>
  <li>
    <p>config.author.processing</p>
  </li>
  <li>
    <p>config.author.processing.develop</p>
  </li>
  <li>
    <p>config.author.processing.localdev</p>
  </li>
  <li>
    <p>config.author.processing.sit</p>
  </li>
  <li>
    <p>config.author.production</p>
  </li>
  <li>
    <p>config.author.sit</p>
  </li>
  <li>
    <p>config.author.staging</p>
  </li>
  <li>
    <p>config.author.training</p>
  </li>
  <li>
    <p>config.author.uat</p>
  </li>
  <li>
    <p>config.publish</p>
  </li>
</ul>

<p>By default it will use the AEM server run mode, the OSGi service definition XMLs in <em>config.author<strong>, **config.publisher</strong> and **config.author.processing</em>. Each environment can override them by specifying a OSGi service definition XML in the corresponding environment run mode.</p>

<p>More information can be found in the online documentation <a href="https://docs.adobe.com/docs/en/aem/6-3/deploy/configuring/configure-runmodes.html">Deploying and Maintaining, Configuring, Run Modes</a> (NOTE:  https://docs.adobe.com/docs/en/aem/6-3/deploy/configuring/configure-runmodes.html).</p>

<h4 id="environment-config-content">Environment Config Content</h4>

<p>The AEM Configuration project produces one configuration file per environment. This is to configure AEM components that are not OSGi based. For example, the following AEM configurations:</p>

<ol>
  <li>
    <p>Cloud Configs</p>
  </li>
  <li>
    <p>Replication Agents</p>
  </li>
</ol>

<p>These configuration packages are created:</p>

<ul>
  <li>
    <p>aemdesign-aem-config-[<em>release_version</em>]-develop.zip</p>
  </li>
  <li>
    <p>aemdesign-aem-config-[<em>release_version</em>]-production.zip</p>
  </li>
  <li>
    <p>aemdesign-aem-config-[<em>release_version</em>]-sit.zip</p>
  </li>
  <li>
    <p>aemdesign-aem-config-[<em>release_version</em>]-staging.zip</p>
  </li>
  <li>
    <p>aemdesign-aem-config-[<em>release_version</em>]-training.zip</p>
  </li>
  <li>
    <p>aemdesign-aem-config-[<em>release_version</em>].zip</p>
  </li>
</ul>

<h3 id="aem-initial-content">AEM Initial Content</h3>

<p>The AEM Initial Content project contains content that is required for a functioning site. It also enables transportable content between testing environments.</p>

<h2 id="virtual-machine-project">Virtual Machine Project</h2>

<p>The aemdesign-vm project uses Packer by HashiCorp to automate machine image creation.</p>

<p>To learn more about Packer, refer to the <a href="https://www.packer.io/docs/index.html">online documentation</a> (NOTE:  https://www.packer.io/docs/index.html).</p>

<p>The project was built using VirtualBox Version 5.1.10. The binaries are available for download at: <a href="https://www.virtualbox.org/wiki/Downloads">https://www.virtualbox.org/wiki/Downloads</a></p>

<h3 id="packer-project-overview">Packer Project Overview</h3>

<p>The project is designed to build on Centos and has built and provisioned Centos versions 7+ for deployment on private datacenter infrastructure.</p>

<p>While the datacenter servers are running on VMWare virtualisation, the local development image is built for VirtualBox.</p>

<h4 id="packer-project-structure">Packer Project Structure</h4>

<table>
  <thead>
    <tr>
      <th>Path</th>
      <th>Content</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Path</td>
      <td>Content</td>
    </tr>
    <tr>
      <td>/</td>
      <td>Templates with build configuration for the machine image automation</td>
    </tr>
    <tr>
      <td>http/</td>
      <td>Path to the configuration files for the HTTP server during Machine Image creation. The Anaconda Kickstart scripts configures RHEL7 in an non-interactive environment (the template file’s builder variable boot_command is used to execute the script). <a href="https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/Installation_Guide/sect-kickstart-syntax.html">Kickstart Syntax Reference</a></td>
    </tr>
    <tr>
      <td>http/iso</td>
      <td>Path to Red Hat Enterprise Linux 7 Full ISO for building the machine image</td>
    </tr>
    <tr>
      <td>scripts/</td>
      <td>Shell scripts executed as provisioners during the build</td>
    </tr>
    <tr>
      <td>scripts/common</td>
      <td>Scripts common to all machine image builds</td>
    </tr>
    <tr>
      <td>scripts/devops</td>
      <td>Scripts to install and configure devops services such as Docker</td>
    </tr>
    <tr>
      <td>scripts/rhel</td>
      <td>Scripts to configure Red Hat Enterprise Linux</td>
    </tr>
    <tr>
      <td>settings/</td>
      <td>Setting variable files to customise machine images. Overrides variables defined in the build templates</td>
    </tr>
  </tbody>
</table>

<h3 id="using-packer">Using Packer</h3>

<h4 id="packer-installation">Packer Installation</h4>

<p>In the aemdesign-vm project,</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm <span class="nb">install</span> <span class="o">&amp;&amp;</span> ./packer.io/install
</code></pre></div></div>

<h4 id="packer-command">Packer Command</h4>

<p>The Packer command requires two json configuration files to build a machine image,</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./bin/packer build <span class="nt">-var-file</span><span class="o">=</span>./settings/[variables].json <span class="o">[</span>template_file].json
</code></pre></div></div>

<p>Where</p>

<ul>
  <li>
    <p><strong><em>template_file</em></strong>* *is the configuration for the build</p>
  </li>
  <li>
    <p><strong><em>variables</em></strong> overrides the “variables” section in the <strong><em>template_file</em></strong></p>
  </li>
</ul>

<p>The <strong><em>template_file</em></strong>* *build configuration files can be found in the project’s root path. The <strong><em>variables</em></strong> file overrides values defined in the <strong><em>template_file</em></strong>. This enables the customisation of images.</p>

<table>
  <thead>
    <tr>
      <th>Template File</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>centos-vbox.json</td>
      <td>Builds a VM Machine Image, configures a NAT network interface and installs VM tools</td>
    </tr>
  </tbody>
</table>

<h3 id="machine-image-builds">Machine Image Builds</h3>

<p><strong>Note</strong>: For best results please pass params to packer instead of using settings files, this will keep repo clean</p>

<h4 id="local-image-build">Local Image Build</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./bin/packer build <span class="nt">-var-file</span><span class="o">=</span>./settings/variables-online.json template-rhel-build-virtualbox-localdev.json
</code></pre></div></div>

<h4 id="sit-image-build">SIT Image Build</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./bin/packer build <span class="nt">-var-file</span><span class="o">=</span>./settings/variables-online-sit.json template-rhel-build-virtualbox-server.json
</code></pre></div></div>

<h4 id="staging-image-build">Staging Image Build</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./bin/packer build <span class="nt">-var-file</span><span class="o">=</span>./settings/variables-online-stage.json ./templates/centos-vbox.json
</code></pre></div></div>

<h4 id="production-image-build">Production Image Build</h4>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./bin/packer build <span class="nt">-var-file</span><span class="o">=</span>./settings/variables-online-prod.json ./templates/centos-vbox.json
</code></pre></div></div>

<h3 id="updating-a-machine-image">Updating a Machine Image</h3>

<p><strong>Note</strong>: Packer will download and cache ISO file first time, follow this if you want manual control over this process</p>

<ol>
  <li>
    <p>Download a Centos ISO</p>
  </li>
  <li>
    <p>Copy it to ./*http/iso/ *in the aemdesign-vm project.</p>
  </li>
  <li>
    <p>Update the <strong><em>iso_url</em></strong>* variable *to path of the ISO:</p>

    <p>3.1  from “iso_url”: “http://ftp.swin.edu.au/centos/7/isos/x86_64/CentOS-7-x86_64-DVD-1708.iso”,</p>

    <p>3.2. to “iso_url”: “http/iso/your-iso-name.iso”</p>
  </li>
  <li>
    <p>Update the <strong><em>iso_checksum</em></strong>* *variables to match the ISO:</p>

    <p>4.1. from “iso_checksum”: “ec7500d4b006702af6af023b1f8f1b890b6c7ee54400bb98cef968b883cd6546”</p>

    <p>4.2. to “iso_checksum”: “your-iso-sha256-checksum”</p>
  </li>
</ol>

        
      </section>

      <footer class="page__meta">
        
        


        

  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time datetime="2021-03-14">March 14, 2021</time></p>


      </footer>

      <section class="page__share">
  
    <h4 class="page__share-title">Share on</h4>
  

  <a href="https://twitter.com/intent/tweet?text=Projects%20https%3A%2F%2Faem.design%2Fmanual%2Fprojects%2F" class="btn btn--twitter" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Twitter"><i class="fab fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Faem.design%2Fmanual%2Fprojects%2F" class="btn btn--facebook" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Facebook"><i class="fab fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=https%3A%2F%2Faem.design%2Fmanual%2Fprojects%2F" class="btn btn--linkedin" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on LinkedIn"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>


      
  <nav class="pagination">
    
      <a href="/manual/" class="pagination--pager" title="Manual
">Previous</a>
    
    
      <a href="/manual/devtools/" class="pagination--pager" title="Development Tools
">Next</a>
    
  </nav>

    </div>

    
      <div class="page__comments">
  
  
      <h4 class="page__comments-title">Leave a Comment</h4>
      <section id="disqus_thread"></section>
    
</div>

    
  </article>

  
  
    <div class="page__related">
      <h4 class="page__related-title">You May Also Enjoy</h4>
      <div class="grid__wrapper">
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/blog/2022/02/01/goodbye-docker-desktop" rel="permalink">Good Bye Docker Desktop
</a>
      
    </h2>
    

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          4 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">You were great while you lasted1
</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/blog/2022/01/19/how-to-add-property-and-author-a-component-programmatically" rel="permalink">How to add property and author a component programmatically?
</a>
      
    </h2>
    

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          2 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">ACS On-Deploy is the answer!
</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/blog/2021/09/10/spa-headless-widgets-and-aem" rel="permalink">SPA, Headless, Widgets and AEM?
</a>
      
    </h2>
    

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          6 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">When to use these and what they achieve?
</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/blog/2021/04/25/creating-akamai-flush-agent" rel="permalink">AEM Akamai Cache flush Agent 😍
</a>
      
    </h2>
    

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          3 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">Why should we bother DevOps to clear Akamai Cache when you can do it yourself using flush agent
</p>
  </article>
</div>

        
      </div>
    </div>
  
  
</div>

    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><form onsubmit="return googleCustomSearchExecute();" id="cse-search-box-form-id">
    <label class="sr-only" for="cse-search-input-box-id">
      Enter your search term...
    </label>
    <input type="search" id="cse-search-input-box-id" class="search-input" tabindex="-1" placeholder="Enter your search term..." />
  </form>
  <div id="results" class="results">
    <gcse:searchresults-only></gcse:searchresults-only>
  </div></div>

      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    

    
      
        
      
        
      
        
      
        
      
        
      
        
      
    

    
      <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
    
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2022 AEM.Design. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>


<script>
  (function () {
    var cx = '004447691990096211192:ourol5vhlpw';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();

  function googleCustomSearchExecute() {
    var input = document.getElementById('cse-search-input-box-id');
    var element = google.search.cse.element.getElement('searchresults-only0');
    if (input.value == '') {
      element.clearAllResults();
    } else {
      element.execute(input.value);
    }
    return false;
  }

  
    $(document).ready(function () {
      $('input#cse-search-input-box-id').on('keyup', function () {
        googleCustomSearchExecute();
      });
    });
  
</script>




  <script>
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-90746663-1']);
  
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>






    
  <script>
    var disqus_config = function () {
      this.page.url = "https://aem.design/manual/projects/";  /* Replace PAGE_URL with your page's canonical URL variable */
      this.page.identifier = "/manual/010-projects"; /* Replace PAGE_IDENTIFIER with your page's unique identifier variable */
    };
    (function() { /* DON'T EDIT BELOW THIS LINE */
      var d = document, s = d.createElement('script');
      s.src = 'https://aem-design.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  </script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>


  





  </body>
</html>
